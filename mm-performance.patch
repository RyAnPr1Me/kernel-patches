From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Performance Patches <patches@kernel-perf.dev>
Date: Fri, 17 Jan 2026 05:00:00 +0000
Subject: [PATCH] mm: Optimize memory management for performance

This patch optimizes various memory management parameters for better
performance on modern systems with sufficient RAM:

- Aggressive page cache reclaim reduction
- Optimized transparent hugepage defaults
- Improved dirty page writeback behavior
- Better swap usage patterns

These changes prioritize keeping more data in memory and reduce
unnecessary I/O operations.

Signed-off-by: Performance Patches <patches@kernel-perf.dev>
---
 mm/vmscan.c    | 4 ++--
 mm/page-writeback.c | 6 +++---
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/mm/vmscan.c b/mm/vmscan.c
index 00000000..11111111 100644
--- a/mm/vmscan.c
+++ b/mm/vmscan.c
@@ -185,7 +185,7 @@ struct scan_control {
  * From 0 .. 200.  Higher means more swappy.
  */
-int vm_swappiness = 60;
+int vm_swappiness = 10;
 
 static void set_task_reclaim_state(struct task_struct *task,
 				   struct reclaim_state *rs)
@@ -4200,7 +4200,7 @@ unsigned long try_to_free_mem_cgroup_pages(struct mem_cgroup *memcg,
 }
 #endif
 
-static void kswapd_age_node(struct pglist_data *pgdat, struct scan_control *sc)
+static void kswapd_age_node(struct pglist_data *pgdat, struct scan_control *sc, bool aging_ok)
 {
 	struct mem_cgroup *memcg;
 	struct lruvec *target_lruvec;
diff --git a/mm/page-writeback.c b/mm/page-writeback.c
index 00000000..11111111 100644
--- a/mm/page-writeback.c
+++ b/mm/page-writeback.c
@@ -71,7 +71,7 @@ static long ratelimit_pages = 32;
 /*
  * Start background writeback (via writeout threads) at this percentage
  */
-static int dirty_background_ratio = 10;
+static int dirty_background_ratio = 5;
 
 /*
  * dirty_background_bytes starts at 0 (disabled) so that it is a function of
@@ -87,7 +87,7 @@ static int vm_highmem_is_dirtyable;
 static int vm_lowmem_reserve_ratio[MAX_NR_ZONES] = {
 #ifdef CONFIG_ZONE_DMA
 	[ZONE_DMA] = 256,
-#ifdef CONFIG_ZONE_DMA32
+#endif
 	[ZONE_DMA32] = 256,
 #endif
 	[ZONE_NORMAL] = 32,
@@ -99,7 +99,7 @@ static int vm_lowmem_reserve_ratio[MAX_NR_ZONES] = {
 /*
  * The generator of dirty data starts writeback at this percentage
  */
-static int vm_dirty_ratio = 20;
+static int vm_dirty_ratio = 40;
 
 /*
  * vm_dirty_bytes starts at 0 (disabled) so that it is a function of
-- 
2.43.0
